<!DOCTYPE html>
<html mip>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
        <meta name="format-detection" content="telephone=no">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <title>MIP 2.0</title>
        <link rel="shortcut icon" href="//www.baidu.com/favicon.ico" >
        <link rel="canonical" href="对应的原页面地址">
        <link rel="stylesheet" href="https://bos.nj.bpc.baidu.com/assets/mip/projects/mip.css">
        <style mip-custom>
        /* 自定义样式 */
        </style>
    </head>

    <body>
        <h2 id="mip-2-0-" data-hash="#mip-20-组件实例生命周期和回调钩子">MIP 2.0 组件实例生命周期和回调钩子</h2><h3 id="-" data-hash="#组件实例生命周期">组件实例生命周期</h3><p>mip 自定义元素 (Custom Element) 本质上是基于 <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements">Web Component</a> 规范实现的一种用于创建自定 HTML 元素的功能。为了方便开发，mip2 支持开发者使用 vue 的方式 mip 自定义元素，而隐藏了自定义元素注册和生命周期回调，开发者可以完全专注 vue 组件的开发。</p><p>你可以定义以下的生命周期回调钩子，这些回调会在自定义元素的生命周期的不同点回调。所有的生命周期钩子自动绑定 this 上下文到 vue 实例中，因此你可以访问数据，对属性和方法进行运算。这意味着 你不能使用箭头函数来定义一个生命周期方法 (例如 created: () =&gt; this.fetchTodos())。这是因为箭头函数绑定了父上下文，因此 this 与你期待的 Vue 实例不同，this.fetchTodos 的行为未定义。</p><ul><li><strong>beforeCreate</strong>: vue 实例准备初始化前调用</li><li><strong>created</strong>： vue 实例初始化完成后调用</li><li><strong>beforeMount</strong>: vue 准备挂载到自定义元素下前调用</li><li><strong>mounted</strong>: vue 挂载到自定义元素后调用</li><li><strong>beforeUpdate</strong>: vue 数据状态发生变化时调用，如果自定义元素上的属性在 vue 组件定义的 prop 列表里，则自定义元素属性变化会触发 vue 数据状态的变化</li><li><strong>updated</strong>: vue 重新渲染完成后触发调用</li><li><strong>firstInviewCallback</strong>: 自定义元素第一次出现在浏览器窗口时触发调用，参数为自定义元素实例</li><li><strong>connnectedCallback</strong>: 自定义元素挂载到 dom 结构时候调用,参数为自定义元素实例</li><li><strong>disconnectedCallback</strong>: 自定义元素从 dom 结构移除后调用,参数为自定义元素实例</li></ul><h3 id="-" data-hash="#生命周期图示">生命周期图示</h3><p>下图展示了通过 vue 编写 mip 组件实例的生命周期，其中红色框暴露给开发者的生命周期钩子，可以看到除了 firstInviewCallback 钩子，其他钩子都是 vue 的生命周期，这么做也是为了降低学习成本，提高开发效率。</p><p><img src="mip/assets/mip2-component-lifecycle.png" alt="mip2 组件生命周期"></p>
        <script src="https://bos.nj.bpc.baidu.com/assets/mip/projects/mip.js"></script>
    </body>
</html>
