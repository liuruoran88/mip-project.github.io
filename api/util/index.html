<!DOCTYPE html>
<html mip>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <title>MIP page</title>
    <link rel="canonical" href="对应的原页面地址">
    <link rel="stylesheet" type="text/css" href="https://c.mipcdn.com/static/v2/mip.css">
    <!-- <link rel="stylesheet" href="https://bos.nj.bpc.baidu.com/assets/mip/projects/mip.css"> -->
    <!-- <link rel="stylesheet" href="http://172.18.19.102:8080/dist/mip.css"> -->
    <link rel="stylesheet" type="text/css" href="/src/builder/dist/index.css">
  </head>
  <body>
<mip-fixed type="left" top="64px" class="layout-sidebar">
  <mip-sidenav m-bind:menu="menu" m-bind:chapters="chapters" m-bind:url="url">
  </mip-sidenav>
</mip-fixed>
<div class="layout-main-content">
  <div class="content-wrapper">
<p class="markdown-breadcrumb">
</p>
    <div class="markdown-body">
      <h1 id="miputil"><a href="#miputil" class="heading-link"><i class="fa fa-link" aria-hidden="true"></i></a>MIP.util</h1><pre><div class="code-index"><div>1</div><div>2</div></div><code class="lang-javascript">MIP.util
<span class="hljs-built_in">window</span>.MIP.util</code></pre><h2 id="描述"><a href="#描述" class="heading-link"><i class="fa fa-link" aria-hidden="true"></i></a>描述</h2><p><code>MIP.util</code> 对象是工具库的入口文件，除了暴露了 <code>fn</code> <code>dom</code> 等其他的工具库外，本身还提供了 <code>parseCacheUrl</code>, <code>makeCacheUrl</code> 和 <code>getOriginalUrl</code> 函数</p><h2 id="属性"><a href="#属性" class="heading-link"><i class="fa fa-link" aria-hidden="true"></i></a>属性</h2><p><strong>fn</strong>: <code>Object</code></p><p>一些函数式的工具函数，参考<a href="/api/util/util/fn.html">工具</a></p><p><strong>dom</strong>: <code>Object</code></p><p>DOM 相关的工具函数，参考<a href="/api/util/dom.html">DOM</a></p><p><strong>event</strong>: <code>Object</code></p><p>事件代理工具函数，参考<a href="/api/util/event.html">event</a></p><p><strong>rect</strong>: <code>Object</code></p><p>DOM 位置相关的工具函数，参考<a href="/api/util/rect.html">rect</a></p><p><strong>hash</strong>: <code>Object</code></p><p>hash 相关的工具，参考<a href="/api/util/hash.html">hash</a></p><p><strong>platform</strong>: <code>Object</code></p><p>当前所处平台相关的工具，如浏览器和系统，参考<a href="/api/util/platform.html">platform</a></p><p><strong>EventEmitter</strong>: <code>EventEmitter</code></p><p>EventEmitter 类，提供了 mixin 函数，参考<a href="/api/util/event-emitter.html">EventEmitter</a></p><p><strong>Gesture</strong>: <code>Gesture</code></p><p>手势相关的工具，参考<a href="/api/util/gesture.html">Gesture</a></p><p><strong>customStorage</strong>: <code>Object</code></p><p>存储相关的工具，参考<a href="/api/util/custom-storage.html">customStorage</a></p><p><strong>naboo</strong>: <code>Object</code></p><p>动画库 Naboo，参考<a href="/api/util/naboo.html">naboo</a></p><h2 id="方法"><a href="#方法" class="heading-link"><i class="fa fa-link" aria-hidden="true"></i></a>方法</h2><p><strong>css</strong></p><ul><li>参数：<ul><li>{Array.\&lt;HTMLElement>|NodeList|HTMLElement} elements 需要设置的元素或者数组</li><li>{Object.&lt;string, string|number&gt;|string} property 属性名，如果是 Object，则为属性和值的键值对 <code>css(element, {left: 0, top: 0})</code></li><li>{string|number=} value 属性值</li></ul></li><li><p>返回值：</p><p>{Array.\&lt;HTMLElement>|HTMLElement|string}</p><ul><li>如果 elements 为数组，返回值为数组</li><li>如果 elements 单个 HTMLElement，并且有属性值，返回值为 HTMLElement</li><li>如果没有需要的属性值，返回值为该 HTMLElement 对应属性的值</li></ul></li><li><p>用法：</p><p>设置或者获取元素对应属性的值</p><pre><div class="code-index"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div></div><code class="lang-javascript"><span class="hljs-keyword">let</span> element = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#id'</span>)
<span class="hljs-keyword">let</span> elements = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'a'</span>)
<span class="hljs-comment">// 获取 #id 的 color 值</span>
MIP.util.css(element, <span class="hljs-string">'color'</span>)
<span class="hljs-comment">// 设置 #id 的颜色为 #ccc</span>
MIP.util.css(element, <span class="hljs-string">'color'</span>, <span class="hljs-string">'#ccc'</span>)
<span class="hljs-comment">// 设置 a 链接的颜色为 #ccc</span>
MIP.util.css(elements, <span class="hljs-string">'color'</span>, <span class="hljs-string">'#ccc'</span>)
<span class="hljs-comment">// 设置 a 链接的颜色和字体大小</span>
MIP.util.css(elements, {<span class="hljs-attr">color</span>: <span class="hljs-string">'#ccc'</span>, <span class="hljs-string">'font-size'</span>: <span class="hljs-string">'14px'</span>})</code></pre></li></ul><p><strong>jsonParse</strong></p><ul><li>参数：<ul><li>{string} jsonStr 需要转成 JSON 的字符串</li></ul></li><li><p>用法：</p><p>可以将不符合标准 JSON 标准的字符串转为 JSON，当然需要是正确的 JSON 字符串</p><pre><div class="code-index"><div>1</div><div>2</div></div><code class="lang-javascript"><span class="hljs-comment">// 返回值为 {a: 1, b: 2, c: 3}</span>
MIP.util.jsonParse(<span class="hljs-string">'{a: 1, \'b\': 2, "c": 3}'</span>)</code></pre></li></ul><p><strong>parseCacheUrl</strong></p><ul><li>参数：<ul><li>{string} url 源 URL</li></ul></li><li><p>返回值：</p><p>{string} 处理后的 URL</p></li><li><p>用法：</p><p>把 Cache URL 处理为源 URL</p><pre><div class="code-index"><div>1</div><div>2</div></div><code class="lang-javascript"><span class="hljs-comment">// 返回 https://www.mipengine.org/static/index.html</span>
MIP.util.parseCacheUrl(<span class="hljs-string">'https://mipcache.bdstatic.com/c/www.mipengine.org/static/index.html'</span>)</code></pre></li></ul><p><strong>makeCacheUrl</strong></p><ul><li>参数：<ul><li>{string} url 源 URL</li><li>{string} type URL 的类型，目前只有两种情况，img 或者为空</li><li>{boolean} containsHost 是否需要包含 host</li></ul></li><li><p>返回值：</p><p>{string} 返回的 Cache URL</p></li><li><p>用法：</p><p>将一个 URL 处理为 Cache URL</p><pre><div class="code-index"><div>1</div><div>2</div></div><code class="lang-javascript"><span class="hljs-comment">// 返回值为 /c/s/www.mipengine.com</span>
MIP.util.makeCacheUrl(<span class="hljs-string">'https://www.mipengine.com'</span>)</code></pre><p>参考相关<a href="https://github.com/mipengine/mip2/blob/master/packages/mip/test/specs/util.spec.js#L112">测试用例</a></p></li></ul><p><strong>isCacheUrl</strong></p><ul><li>参数：<ul><li>{string} url</li></ul></li><li><p>返回值：</p><p>{boolean} 是否为 MIP Cache URL</p></li><li><p>用法：</p><p>判断链接是否为 MIP Cache URL</p><pre><div class="code-index"><div>1</div><div>2</div></div><code class="lang-javascript"><span class="hljs-comment">// 返回 true</span>
MIP.util.isCacheUrl(<span class="hljs-string">'http://www-mipengine-com.mipcdn.com/c/www.mipengine.com/docs/index.html'</span>)</code></pre></li></ul>
    </div>
<div class="markdown-toolbar">
  <span><i class="iconfont icon-edit"></i> 反馈</span><span>编辑</span>
</div>
<div class="markdown-paginator">
</div>
  </div>
  <mip-data>
    <script type="application/json">
      {
        "menu": [{"name":"API","path":"docs/api/index.md","url":"/api/index.html"},{"name":"MIP 对象","path":"docs/api/mip.md","url":"/api/mip.html"},{"name":"util","path":"docs/api/util","children":[{"name":"MIP.util.customStorage","path":"docs/api/util/customStorage.md","url":"/api/util/customStorage.html"},{"name":"MIP.util.dom","path":"docs/api/util/dom.md","url":"/api/util/dom.html"},{"name":"MIP.util.EventEmitter","path":"docs/api/util/event-emitter.md","url":"/api/util/event-emitter.html"},{"name":"MIP.util.event","path":"docs/api/util/event.md","url":"/api/util/event.html"},{"name":"MIP.util.fn","path":"docs/api/util/fn.md","url":"/api/util/fn.html"},{"name":"MIP.util","path":"docs/api/util/index.md","url":"/api/util/index.html"},{"name":"MIP.util.jsonParse","path":"docs/api/util/jsonParse.md","url":"/api/util/jsonParse.html"},{"name":"MIP.util.platform","path":"docs/api/util/platform.md","url":"/api/util/platform.html"},{"name":"MIP.util.rect","path":"docs/api/util/rect.md","url":"/api/util/rect.html"}]},{"name":"viewer","path":"docs/api/viewer.md","url":"/api/viewer.html"},{"name":"viewport","path":"docs/api/viewport.md","url":"/api/viewport.html"}],
        "chapters": [{"level":1,"hash":"#miputil","text":"MIP.util","children":[{"level":2,"hash":"#描述","text":"描述"},{"level":2,"hash":"#属性","text":"属性"},{"level":2,"hash":"#方法","text":"方法"}]}],
        'url': "/api/util/index.html"
      }
    </script>
  </mip-data>
</div>
    <mip-data>
      <script type="application/json">
        {
          "navIndex": 0,
          "navbarStyle": {
            "width": "0",
            "transform": ""
          },
          "navSep": 0,
          "navbar": [{"name":"首页","url":"/index.html","width":32},{"name":"学习","width":32,"children":[{"name":"使用文档","url":"/guide/index.html","width":64},{"name":"组件列表","url":"/components/index.html","width":64},{"name":"API","url":"/api/index.html"},{"name":"Codelab","url":"/codelab/index.html","width":60}]},{"name":"帮助","url":"/help","width":32},{"name":"常用链接","children":[{"name":"MIP 官方博客"},{"name":"MIP 代码校验工具"}],"width":82},{"name":"GitHub","url":"/github","width":50}]
        }
      </script>
    </mip-data>


    <mip-fixed type="top" class="layout-navbar-fixed">
<div class="layout-navbar">
  <div class="navbar-logo"></div>
  <div class="navbar-menu">
    <ul class="navbar-menu-wrapper">
      <li class="navbar-item" on="tap:MIP.setData({navIndex:0})"><a data-type="mip" href="/index.html" class="menu-name">首页</a></li>
      <li class="navbar-item">
        <span class="menu-name">学习<i class="arrow"></i></span>
        <ul class="navbar-sub-menu">
          <li class="navbar-sub-item"><a data-type="mip" href="/guide/index.html">使用文档</a></li>
          <li class="navbar-sub-item"><a data-type="mip" href="/components/index.html">组件列表</a></li>
          <li class="navbar-sub-item"><a data-type="mip" href="/api/index.html">API</a></li>
          <li class="navbar-sub-item"><a data-type="mip" href="/codelab/index.html">Codelab</a></li>
        </ul>
      </li>
      <li class="navbar-item" on="tap:MIP.setData({navIndex:2})"><a data-type="mip" href="/help" class="menu-name">帮助</a></li>
      <li class="navbar-item">
        <span class="menu-name">常用链接<i class="arrow"></i></span>
        <ul class="navbar-sub-menu">
          <li class="navbar-sub-item"><a data-type="mip" href="">MIP 官方博客</a></li>
          <li class="navbar-sub-item"><a data-type="mip" href="">MIP 代码校验工具</a></li>
        </ul>
      </li>
      <li class="navbar-item" on="tap:MIP.setData({navIndex:4})"><a data-type="mip" href="/github" class="menu-name">GitHub</a></li>
    </ul>
    <div class="navbar-indicator" m-bind:style="navbarStyle"></div>
  </div>
  <div class="navbar-toggle"><i class="iconfont icon-bars"></i></div>
</div>
    </mip-fixed>

    <!-- <script src="http://172.18.19.102:8080/dist/mip.js"></script> -->
    <script src="https://c.mipcdn.com/static/v2/mip.js"></script>
    <!-- <script src="https://bos.nj.bpc.baidu.com/assets/mip/projects/mip.js"></script> -->
    <script src="/assets/mip-sidenav/mip-sidenav.js"></script>
    <script src="https://c.mipcdn.com/static/v1/mip-fixed/mip-fixed.js"></script>
    <script src="https://c.mipcdn.com/static/v1/mip-nav-slidedown/mip-nav-slidedown.js"></script>
  </body>
</html>
